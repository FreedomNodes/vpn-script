/*!
 substore-tools - version: 1.2.3
 Build fullhash:084113a448a1c331f0d6, chunkhash:6ac839f57925e889dd67 (2024-05-11 22:22:51)

 Author: Kien Tran
*/
(()=>{(()=>{"use strict";var Y={3183:(_,p,o)=>{var m;typeof window!="undefined"?m=window:typeof o.g!="undefined"?m=o.g:typeof self!="undefined"?m=self:m={},_.exports=m},8475:(_,p,o)=>{o.d(p,{A:()=>s});const m=$substore;class g{constructor(t,i){this.key=t,this.expires=i;const a=m.read(t);a?this.resourceCache=JSON.parse(a):(this.resourceCache={},this._persist()),this._cleanup()}_cleanup(){let t=!1;const i=new Date().getTime();Object.keys(this.resourceCache).forEach(a=>{const O=this.resourceCache[a];(!O.time||i-O.time>this.expires)&&(delete this.resourceCache[a],m.delete(`#${a}`),t=!0)}),t&&this._persist()}revokeIds(t){let i=!1;for(const a of t)delete this.resourceCache[a],i=!0;i&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){m.write(JSON.stringify(this.resourceCache),this.key)}get(t){const i=this.resourceCache[t]&&this.resourceCache[t].time;return i&&new Date().getTime()-i<=this.expires?this.resourceCache[t].data:null}set(t,i){this.resourceCache[t]={time:new Date().getTime(),data:i},this._persist()}}const s=g},423:(_,p,o)=>{o.d(p,{ru:()=>g});var m=(t,i,a)=>new Promise((O,I)=>{var v=c=>{try{A(a.next(c))}catch(T){I(T)}},P=c=>{try{A(a.throw(c))}catch(T){I(T)}},A=c=>c.done?O(c.value):Promise.resolve(c.value).then(v,P);A((a=a.apply(t,i)).next())});function g(){return m(this,null,function*(){const t=yield produceArtifact({type:"file",name:"proxy_config"});return ProxyUtils.yaml.safeLoad(t)})}function s(){return m(this,null,function*(){const t=yield produceArtifact({type:"file",name:"subscription_config"});return ProxyUtils.yaml.safeLoad(t)})}function y(t){return m(this,null,function*(){const i=normalizeString(t),a=yield s();let O="";for(const I in a)if(containsIgnoreCase(i,normalizeString(I))){O=I;break}return a[O]})}},1500:(_,p,o)=>{o.d(p,{Dq:()=>y,Mi:()=>I,S9:()=>P,Vo:()=>O,Zg:()=>t,l0:()=>i,qu:()=>a,sY:()=>c,u6:()=>T});var m=Math.pow,g=(d,C,l)=>new Promise((f,h)=>{var w=e=>{try{R(l.next(e))}catch(n){h(n)}},V=e=>{try{R(l.throw(e))}catch(n){h(n)}},R=e=>e.done?f(e.value):Promise.resolve(e.value).then(w,V);R((l=l.apply(d,C)).next())});const s=$substore,y={viettel:["Viettel Group","VIETTEL","AS7552 Viettel Group","VIETEL-AS-AP"],vnpt:["Vietnam Posts and Telecommunications Group","VNPT","AS135905 VIETNAM POSTS AND TELECOMMUNICATIONS GROUP","VNPT-AS-VN"],mobifone:["MOBIFONE","Mobifone Corporation","AS131429 MOBIFONE Corporation","MOBIFONE-AS-VN"],fpt:["FPT Telecom Company","AS18403 FPT Telecom Company","FPT-AS-AP"],google:["Google LLC","Google Cloud","AS15169 Google LLC"],mcloud:["MCLOUD","1mcloud Technology Company Limited","S149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"],gnetwork:["GNETWORK","Gnetwork Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],akamai:["Akamai Technologies","Linode","AS63949 Akamai Connected Cloud","AKAMAI-LINODE-AP"],cloviet:["CLOVIET","Cloud Viet ONE Member Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietDigital:["Viet Digital Technology Liability Company","Mailand Technology Trading Services Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietServer:["Vietserver Services Technology Company Limited","T-media Digital Technology Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],digitalOcean:["DigitalOcean, LLC","AS14061 DigitalOcean, LLC","DIGITALOCEAN-ASN"],cloudfly:["Cloudfly Corporation","AS149089 CLOUDFLY CORPORATION","CLOUDFLY-VN"],vpsmmo:["Vpsmmo Technology Company Limited","1mcloud Technology Company Limited","AS149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"]},t={hn:["HN","Hanoi"],dn:["DN","Da Nang"],sg:["SG","Ho Chi Minh"]};function i(d){return!!/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}$/i.test(d)}function a(d){return!!/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)(\/([1-9]|[1-2][0-9]|3[0-2])){0,1}$/.test(d)}function O(d,C){const l=d.split("."),f=C.split(".");if(l.length<3||f.length<3)return!1;for(let h=0;h<3;h++)if(l[h]!==f[h])return!1;return!0}function I(d){const C=d.split(".");return C[C.length-1]}function v(d){return g(this,null,function*(){const C=`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(d)}&type=A`,l={Accept:"application/dns-json"};try{const f=yield s.http.get({url:C,headers:l}),h=JSON.parse(f.body);if(h.Status!==0)throw new Error(`HTTP error! status: ${h.Status}`);return h.Answer?h.Answer.map(w=>`${w.data}`)[0]:""}catch(f){return""}})}function P(d){return g(this,null,function*(){return yield s.http.get(`https://dns.google/resolve?name=${d}`).then(l=>{const f=JSON.parse(l.body);if(f.Status===0){const h=f.Answer.find(w=>w.type===1);return h?h.data:""}return""})})}function A(d){return g(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${d}?fields=country`).then(l=>JSON.parse(l.body).country||"")})}function c(d){return g(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${d}?fields=region,regionName`).then(l=>{const f=JSON.parse(l.body);return f.regionName&&f.region?`${f.regionName} (${f.region})`:""})})}function T(d){return g(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${d}?fields=isp`).then(l=>JSON.parse(l.body).isp||"")})}function k(d){return g(this,null,function*(){return yield s.http.post({url:"http://ip-api.com/batch?fields=isp",body:JSON.stringify(d)}).then(l=>JSON.parse(l.body).map(h=>h.isp))})}function U(d,C){let l,f;const h=G(d);if((l=C.match(/^(.*?)\/(\d{1,2})$/))&&(f=G(l[1]))>=0){const w=m(2,32-parseInt(l[2]));return h>=f&&h<=f+w-1}return!1}function G(d){let C;if(C=d.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let l=0,f=1;for(let h=4;h>=1;h-=1)l+=f*parseInt(C[h]),f*=256;return l}return-1}},9085:(_,p,o)=>{o.d(p,{G:()=>m});function m(s){return s&&s!=="null"&&s!=="undefined"}function g(s,y){return s.reduce((t,i)=>{const a=i[y];return t[a]||(t[a]=[]),t[a].push(i),t},{})}},4173:(_,p,o)=>{o.d(p,{$S:()=>C,Ck:()=>U,Hd:()=>d,eD:()=>G,um:()=>l,xG:()=>k});var m=o(9085),g=o(1058),s=o(1500),y=o(8475),t=Math.pow,i=(e,n,u)=>new Promise((r,E)=>{var L=N=>{try{b(u.next(N))}catch(D){E(D)}},M=N=>{try{b(u.throw(N))}catch(D){E(D)}},b=N=>N.done?r(N.value):Promise.resolve(N.value).then(L,M);b((u=u.apply(e,n)).next())});const a="#sub-store-cached-dns",O="#sub-store-cached-isp",I="#sub-store-cached-region",v=7*24*60*60*1e3,P=new y.A(a,v),A=new y.A(O,v),c=new y.A(I,v);function T(e,n){(e.type==="vmess"||e.type==="vless"||e.type==="trojan")&&(e.network==="ws"&&(e["ws-opts"]=e["ws-opts"]||{},e["ws-opts"].headers=e["ws-opts"].headers||{},e["ws-opts"].headers.Host=n),e.network==="grpc"&&(e["grpc-opts"]=e["grpc-opts"]||{},e["grpc-opts"]["grpc-service-name"]=e["grpc-opts"]["grpc-service-name"]||"",e.servername=n),e.network==="tcp"&&(e.servername=n),e.sni=n),isRealValue(e["skip-cert-verify"])||(e["skip-cert-verify"]=!0)}function k(e,n){return(0,g.r)(e.regex).test(n.name)}function U(e,n){return e.ports.some(u=>u===n.port)}function G(e,n){return i(this,null,function*(){return(yield Promise.all(e.ips.map(r=>w(n.server,r)))).some(r=>r)})}function d(e,n){return i(this,null,function*(){return(yield Promise.all(e.isps.map(r=>h(n.server,r)))).some(r=>r)})}function C(e,n){return i(this,null,function*(){return(yield Promise.all(e.regions.map(r=>f(n.server,r)))).some(r=>r)})}function l(e,n,u){return i(this,null,function*(){return(yield Promise.all(e.map(E=>E(n,u)))).every(E=>E)})}function f(e,n){return i(this,null,function*(){const u=yield V(e);try{let r="";const E=c.get(u);E?r=E:(r=yield(0,s.sY)(u),r&&c.set(u,r));const L=(0,g.Z)(r);if(L){const{name:M,code:b}=L,N=s.Zg[n.toLowerCase()];if((0,m.G)(N)&&(N.some(D=>RegExp(`${D}`,"i").test(b))||N.some(D=>RegExp(`${D}`,"i").test(M))))return!0}}catch(r){return!1}return!1})}function h(e,n){return i(this,null,function*(){const u=yield V(e);let r="";const E=A.get(u);return E?r=E:(r=yield(0,s.u6)(u),r&&A.set(u,r)),!!s.Dq[n].some(M=>RegExp(`${M}`,"i").test(r))})}function w(e,n){return i(this,null,function*(){const u=yield V(e);if(!(0,s.qu)(u))return!1;if(n.indexOf("/")<0)return!!(u===n||(0,s.Vo)(u,n)&&(0,s.Mi)(n)==="*");let r,E;const L=R(u);if((r=n.match(/^(.*?)\/(\d{1,2})$/))&&(E=R(r[1]))>=0){const M=t(2,32-parseInt(r[2]));return L>=E&&L<=E+M-1}return!1})}function V(e){return i(this,null,function*(){let n=e;if((0,s.l0)(e)){const u=P.get(e);if(u)n=u;else{const r=yield(0,s.S9)(e);n=r,r&&P.set(e,r)}}return n})}function R(e){let n;if(n=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let u=0,r=1;for(let E=4;E>=1;E-=1)u+=r*parseInt(n[E]),r*=256;return u}return-1}},1058:(_,p,o)=>{o.d(p,{Z:()=>g,r:()=>m});function m(s){const y=s.lastIndexOf("/");return new RegExp(s.slice(1,y),s.slice(y+1))}function g(s){const y=/^([^\(]+) \(([^)]+)\)$/,t=s.match(y);return t?{name:t[1].trim(),code:t[2]}:null}}},$={};function S(_){var p=$[_];if(p!==void 0)return p.exports;var o=$[_]={exports:{}};return Y[_](o,o.exports,S),o.exports}S.n=_=>{var p=_&&_.__esModule?()=>_.default:()=>_;return S.d(p,{a:p}),p},S.d=(_,p)=>{for(var o in p)S.o(p,o)&&!S.o(_,o)&&Object.defineProperty(_,o,{enumerable:!0,get:p[o]})},S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(_){if(typeof window=="object")return window}}(),S.o=(_,p)=>Object.prototype.hasOwnProperty.call(_,p);var H={};(()=>{var _=S(3183),p=S.n(_),o=S(9085),m=S(423),g=S(4173),s=(t,i,a)=>new Promise((O,I)=>{var v=c=>{try{A(a.next(c))}catch(T){I(T)}},P=c=>{try{A(a.throw(c))}catch(T){I(T)}},A=c=>c.done?O(c.value):Promise.resolve(c.value).then(v,P);A((a=a.apply(t,i)).next())});function y(t,i,a){return s(this,null,function*(){const{type:O}=$arguments,I=yield(0,m.ru)(),v=(0,o.G)(O)?I[O]:I[t[0].collectionName];if(!(0,o.G)(v))return t;const P=[];for(const A of t){const c=[];if((0,o.G)(v.regex)&&c.push(g.xG),(0,o.G)(v.ports)&&c.push(g.Ck),(0,o.G)(v.ips)&&c.push(g.eD),(0,o.G)(v.isps)&&c.push(g.Hd),(0,o.G)(v.regions)&&c.push(g.$S),c.length===0){P.push(A);continue}(yield(0,g.um)(c,v,A))&&P.push(A)}return P})}p().operator=y})()})();})();
