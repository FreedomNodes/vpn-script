/*!
 substore-tools - version: 1.2.0
 Build fullhash:fceeee98166f62a52f1b, chunkhash:5781b0f7de6a0e859b0e (2024-05-10 22:55:02)

 Author: Kien Tran
*/
(()=>{(()=>{"use strict";var U={3183:(h,l,o)=>{var _;typeof window!="undefined"?_=window:typeof o.g!="undefined"?_=o.g:typeof self!="undefined"?_=self:_={},h.exports=_},8475:(h,l,o)=>{o.d(l,{A:()=>s});const _=$substore;class m{constructor(t,i){this.key=t,this.expires=i;const a=_.read(t);a?this.resourceCache=JSON.parse(a):(this.resourceCache={},this._persist()),this._cleanup()}_cleanup(){let t=!1;const i=new Date().getTime();Object.keys(this.resourceCache).forEach(a=>{const O=this.resourceCache[a];(!O.time||i-O.time>this.expires)&&(delete this.resourceCache[a],_.delete(`#${a}`),t=!0)}),t&&this._persist()}revokeIds(t){let i=!1;for(const a of t)delete this.resourceCache[a],i=!0;i&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){_.write(JSON.stringify(this.resourceCache),this.key)}get(t){const i=this.resourceCache[t]&&this.resourceCache[t].time;return i&&new Date().getTime()-i<=this.expires?this.resourceCache[t].data:null}set(t,i){this.resourceCache[t]={time:new Date().getTime(),data:i},this._persist()}}const s=m},423:(h,l,o)=>{o.d(l,{ru:()=>m});var _=(t,i,a)=>new Promise((O,A)=>{var C=y=>{try{P(a.next(y))}catch(T){A(T)}},v=y=>{try{P(a.throw(y))}catch(T){A(T)}},P=y=>y.done?O(y.value):Promise.resolve(y.value).then(C,v);P((a=a.apply(t,i)).next())});function m(){return _(this,null,function*(){const t=yield produceArtifact({type:"file",name:"proxy_config"});return ProxyUtils.yaml.safeLoad(t)})}function s(){return _(this,null,function*(){const t=yield produceArtifact({type:"file",name:"subscription_config"});return ProxyUtils.yaml.safeLoad(t)})}function I(t){return _(this,null,function*(){const i=normalizeString(t),a=yield s();let O="";for(const A in a)if(containsIgnoreCase(i,normalizeString(A))){O=A;break}return a[O]})}},1500:(h,l,o)=>{o.d(l,{Dq:()=>I,Mi:()=>A,S9:()=>v,Vo:()=>O,Zg:()=>t,l0:()=>i,qu:()=>a,sY:()=>y,u6:()=>T});var _=Math.pow,m=(p,g,c)=>new Promise((d,f)=>{var L=e=>{try{R(c.next(e))}catch(r){f(r)}},V=e=>{try{R(c.throw(e))}catch(r){f(r)}},R=e=>e.done?d(e.value):Promise.resolve(e.value).then(L,V);R((c=c.apply(p,g)).next())});const s=$substore,I={viettel:["Viettel Group","VIETTEL","AS7552 Viettel Group","VIETEL-AS-AP"],vnpt:["Vietnam Posts and Telecommunications Group","VNPT","AS135905 VIETNAM POSTS AND TELECOMMUNICATIONS GROUP","VNPT-AS-VN"],mobifone:["MOBIFONE","Mobifone Corporation","AS131429 MOBIFONE Corporation","MOBIFONE-AS-VN"],fpt:["FPT Telecom Company","AS18403 FPT Telecom Company","FPT-AS-AP"],google:["Google LLC","Google Cloud","AS15169 Google LLC"],mcloud:["MCLOUD","1mcloud Technology Company Limited","S149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"],gnetwork:["GNETWORK","Gnetwork Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],akamai:["Akamai Technologies","Linode","AS63949 Akamai Connected Cloud","AKAMAI-LINODE-AP"],cloviet:["CLOVIET","Cloud Viet ONE Member Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietDigital:["Viet Digital Technology Liability Company","Mailand Technology Trading Services Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietServer:["Vietserver Services Technology Company Limited","T-media Digital Technology Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],digitalOcean:["DigitalOcean, LLC","AS14061 DigitalOcean, LLC","DIGITALOCEAN-ASN"],cloudfly:["Cloudfly Corporation","AS149089 CLOUDFLY CORPORATION","CLOUDFLY-VN"],vpsmmo:["Vpsmmo Technology Company Limited","1mcloud Technology Company Limited","AS149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"]},t={hn:["HN","Hanoi"],dn:["DN","Da Nang"],sg:["SG","Ho Chi Minh"]};function i(p){return!!/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}$/i.test(p)}function a(p){return!!/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)(\/([1-9]|[1-2][0-9]|3[0-2])){0,1}$/.test(p)}function O(p,g){const c=p.split("."),d=g.split(".");if(c.length<3||d.length<3)return!1;for(let f=0;f<3;f++)if(c[f]!==d[f])return!1;return!0}function A(p){const g=p.split(".");return g[g.length-1]}function C(p){return m(this,null,function*(){const g=`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(p)}&type=A`,c={Accept:"application/dns-json"};try{const d=yield s.http.get({url:g,headers:c}),f=JSON.parse(d.body);if(f.Status!==0)throw new Error(`HTTP error! status: ${f.Status}`);return f.Answer?f.Answer.map(L=>`${L.data}`)[0]:""}catch(d){return""}})}function v(p){return m(this,null,function*(){return yield s.http.get(`https://dns.google/resolve?name=${p}`).then(c=>{const d=JSON.parse(c.body);if(d.Status===0){const f=d.Answer.find(L=>L.type===1);return f?f.data:""}return""})})}function P(p){return m(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${p}?fields=country`).then(c=>JSON.parse(c.body).country||"")})}function y(p){return m(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${p}?fields=region,regionName`).then(c=>{const d=JSON.parse(c.body);return d.regionName&&d.region?`${d.regionName} (${d.region})`:""})})}function T(p){return m(this,null,function*(){return yield s.http.get(`http://ip-api.com/json/${p}?fields=isp`).then(c=>JSON.parse(c.body).isp||"")})}function x(p){return m(this,null,function*(){return yield s.http.post({url:"http://ip-api.com/batch?fields=isp",body:JSON.stringify(p)}).then(c=>JSON.parse(c.body).map(f=>f.isp))})}function k(p,g){let c,d;const f=G(p);if((c=g.match(/^(.*?)\/(\d{1,2})$/))&&(d=G(c[1]))>=0){const L=_(2,32-parseInt(c[2]));return f>=d&&f<=d+L-1}return!1}function G(p){let g;if(g=p.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let c=0,d=1;for(let f=4;f>=1;f-=1)c+=d*parseInt(g[f]),d*=256;return c}return-1}},9085:(h,l,o)=>{o.d(l,{G:()=>_});function _(s){return s&&s!=="null"&&s!=="undefined"}function m(s,I){return s.reduce((t,i)=>{const a=i[I];return t[a]||(t[a]=[]),t[a].push(i),t},{})}},4173:(h,l,o)=>{o.d(l,{$S:()=>g,Ck:()=>k,Hd:()=>p,We:()=>T,eD:()=>G,um:()=>c,xG:()=>x});var _=o(9085),m=o(1058),s=o(1500),I=o(8475),t=Math.pow,i=(e,r,u)=>new Promise((n,E)=>{var w=N=>{try{b(u.next(N))}catch(D){E(D)}},M=N=>{try{b(u.throw(N))}catch(D){E(D)}},b=N=>N.done?n(N.value):Promise.resolve(N.value).then(w,M);b((u=u.apply(e,r)).next())});const a="#sub-store-cached-dns",O="#sub-store-cached-isp",A="#sub-store-cached-region",C=7*24*60*60*1e3,v=new I.A(a,C),P=new I.A(O,C),y=new I.A(A,C);function T(e,r){e.type==="vmess"&&e.network==="ws"&&(e["ws-opts"]=e["ws-opts"]||{},e["ws-opts"].headers=e["ws-opts"].headers||{},e["ws-opts"].headers.Host=r),e.sni=r,(0,_.G)(e["skip-cert-verify"])||(e["skip-cert-verify"]=!0)}function x(e,r){return(0,m.r)(e.regex).test(r.name)}function k(e,r){return e.ports.some(u=>u===r.port)}function G(e,r){return i(this,null,function*(){return(yield Promise.all(e.ips.map(n=>L(r.server,n)))).some(n=>n)})}function p(e,r){return i(this,null,function*(){return(yield Promise.all(e.isps.map(n=>f(r.server,n)))).some(n=>n)})}function g(e,r){return i(this,null,function*(){return(yield Promise.all(e.regions.map(n=>d(r.server,n)))).some(n=>n)})}function c(e,r,u){return i(this,null,function*(){return(yield Promise.all(e.map(E=>E(r,u)))).every(E=>E)})}function d(e,r){return i(this,null,function*(){const u=yield V(e);try{let n="";const E=y.get(u);E?n=E:(n=yield(0,s.sY)(u),n&&y.set(u,n));const w=(0,m.Z)(n);if(w){const{name:M,code:b}=w,N=s.Zg[r.toLowerCase()];if((0,_.G)(N)&&(N.some(D=>RegExp(`${D}`,"i").test(b))||N.some(D=>RegExp(`${D}`,"i").test(M))))return!0}}catch(n){return!1}return!1})}function f(e,r){return i(this,null,function*(){const u=yield V(e);let n="";const E=P.get(u);return E?n=E:(n=yield(0,s.u6)(u),n&&P.set(u,n)),!!s.Dq[r].some(M=>RegExp(`${M}`,"i").test(n))})}function L(e,r){return i(this,null,function*(){const u=yield V(e);if(!(0,s.qu)(u))return!1;if(r.indexOf("/")<0)return!!(u===r||(0,s.Vo)(u,r)&&(0,s.Mi)(r)==="*");let n,E;const w=R(u);if((n=r.match(/^(.*?)\/(\d{1,2})$/))&&(E=R(n[1]))>=0){const M=t(2,32-parseInt(n[2]));return w>=E&&w<=E+M-1}return!1})}function V(e){return i(this,null,function*(){let r=e;if((0,s.l0)(e)){const u=v.get(e);if(u)r=u;else{const n=yield(0,s.S9)(e);r=n,n&&v.set(e,n)}}return r})}function R(e){let r;if(r=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let u=0,n=1;for(let E=4;E>=1;E-=1)u+=n*parseInt(r[E]),n*=256;return u}return-1}},1058:(h,l,o)=>{o.d(l,{Z:()=>m,r:()=>_});function _(s){const I=s.lastIndexOf("/");return new RegExp(s.slice(1,I),s.slice(I+1))}function m(s){const I=/^([^\(]+) \(([^)]+)\)$/,t=s.match(I);return t?{name:t[1].trim(),code:t[2]}:null}}},$={};function S(h){var l=$[h];if(l!==void 0)return l.exports;var o=$[h]={exports:{}};return U[h](o,o.exports,S),o.exports}S.n=h=>{var l=h&&h.__esModule?()=>h.default:()=>h;return S.d(l,{a:l}),l},S.d=(h,l)=>{for(var o in l)S.o(l,o)&&!S.o(h,o)&&Object.defineProperty(h,o,{enumerable:!0,get:l[o]})},S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(h){if(typeof window=="object")return window}}(),S.o=(h,l)=>Object.prototype.hasOwnProperty.call(h,l);var Y={};(()=>{var h=S(3183),l=S.n(h),o=S(9085),_=S(423),m=S(4173),s=(t,i,a)=>new Promise((O,A)=>{var C=y=>{try{P(a.next(y))}catch(T){A(T)}},v=y=>{try{P(a.throw(y))}catch(T){A(T)}},P=y=>y.done?O(y.value):Promise.resolve(y.value).then(C,v);P((a=a.apply(t,i)).next())});function I(t){return s(this,null,function*(){const i=yield(0,_.ru)();for(const a of t){let O="";for(const A in i){const C=i[A];if((0,o.G)(C)){if(A==="default"){O=C.sni;continue}if((0,o.G)(C.sni)&&(!(0,o.G)(C.skip)||!C.skip)){const v=[];if((0,o.G)(C.regex)&&v.push(m.xG),(0,o.G)(C.ports)&&v.push(m.Ck),(0,o.G)(C.ips)&&v.push(m.eD),(0,o.G)(C.isps)&&v.push(m.Hd),(0,o.G)(C.regions)&&v.push(m.$S),(yield(0,m.um)(v,C,a))||v.length===0){O=C.sni;break}}}}(0,m.We)(a,O)}return t})}l().operator=I})()})();})();
