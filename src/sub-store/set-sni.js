/*!
 substore-tools - version: 1.2.1
 Build fullhash:66fafc714c2839b15406, chunkhash:5c829b9edfd11f2403e9 (2024-05-10 23:02:32)

 Author: Kien Tran
*/
(()=>{(()=>{"use strict";var w={3183:(s,u,c)=>{var m;typeof window!="undefined"?m=window:typeof c.g!="undefined"?m=c.g:typeof self!="undefined"?m=self:m={},s.exports=m}},E={};function p(s){var u=E[s];if(u!==void 0)return u.exports;var c=E[s]={exports:{}};return w[s](c,c.exports,p),c.exports}p.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return p.d(u,{a:u}),u},p.d=(s,u)=>{for(var c in u)p.o(u,c)&&!p.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:u[c]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(s){if(typeof window=="object")return window}}(),p.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u);var k={};(()=>{var s=p(3183),u=p.n(s);function c(n){return n&&n!=="null"&&n!=="undefined"}function m(n,r){return n.reduce((e,t)=>{const o=t[r];return e[o]||(e[o]=[]),e[o].push(t),e},{})}var P=Math.pow,g=(n,r,e)=>new Promise((t,o)=>{var a=i=>{try{f(e.next(i))}catch(l){o(l)}},d=i=>{try{f(e.throw(i))}catch(l){o(l)}},f=i=>i.done?t(i.value):Promise.resolve(i.value).then(a,d);f((e=e.apply(n,r)).next())});const C=null,H={viettel:["Viettel Group","VIETTEL","AS7552 Viettel Group","VIETEL-AS-AP"],vnpt:["Vietnam Posts and Telecommunications Group","VNPT","AS135905 VIETNAM POSTS AND TELECOMMUNICATIONS GROUP","VNPT-AS-VN"],mobifone:["MOBIFONE","Mobifone Corporation","AS131429 MOBIFONE Corporation","MOBIFONE-AS-VN"],fpt:["FPT Telecom Company","AS18403 FPT Telecom Company","FPT-AS-AP"],google:["Google LLC","Google Cloud","AS15169 Google LLC"],mcloud:["MCLOUD","1mcloud Technology Company Limited","S149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"],gnetwork:["GNETWORK","Gnetwork Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],akamai:["Akamai Technologies","Linode","AS63949 Akamai Connected Cloud","AKAMAI-LINODE-AP"],cloviet:["CLOVIET","Cloud Viet ONE Member Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietDigital:["Viet Digital Technology Liability Company","Mailand Technology Trading Services Company Limited","AS135918 VIET DIGITAL TECHNOLOGY LIABILITY COMPANY","DVS-AS-VN"],vietServer:["Vietserver Services Technology Company Limited","T-media Digital Technology Company Limited","AS63737 VIETSERVER SERVICES TECHNOLOGY COMPANY LIMITED","VIETSERVER-AS-VN"],digitalOcean:["DigitalOcean, LLC","AS14061 DigitalOcean, LLC","DIGITALOCEAN-ASN"],cloudfly:["Cloudfly Corporation","AS149089 CLOUDFLY CORPORATION","CLOUDFLY-VN"],vpsmmo:["Vpsmmo Technology Company Limited","1mcloud Technology Company Limited","AS149078 VPSMMO TECHNOLOGY COMPANY LIMITED","VPSMMO-AS-VN"]},x={hn:["HN","Hanoi"],dn:["DN","Da Nang"],sg:["SG","Ho Chi Minh"]};function J(n){return!!/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}$/i.test(n)}function U(n){return!!/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|0)(\/([1-9]|[1-2][0-9]|3[0-2])){0,1}$/.test(n)}function j(n,r){const e=n.split("."),t=r.split(".");if(e.length<3||t.length<3)return!1;for(let o=0;o<3;o++)if(e[o]!==t[o])return!1;return!0}function B(n){const r=n.split(".");return r[r.length-1]}function K(n){return g(this,null,function*(){const r=`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(n)}&type=A`,e={Accept:"application/dns-json"};try{const t=yield C.http.get({url:r,headers:e}),o=JSON.parse(t.body);if(o.Status!==0)throw new Error(`HTTP error! status: ${o.Status}`);return o.Answer?o.Answer.map(a=>`${a.data}`)[0]:""}catch(t){return""}})}function q(n){return g(this,null,function*(){return yield C.http.get(`https://dns.google/resolve?name=${n}`).then(e=>{const t=JSON.parse(e.body);if(t.Status===0){const o=t.Answer.find(a=>a.type===1);return o?o.data:""}return""})})}function z(n){return g(this,null,function*(){return yield C.http.get(`http://ip-api.com/json/${n}?fields=country`).then(e=>JSON.parse(e.body).country||"")})}function W(n){return g(this,null,function*(){return yield C.http.get(`http://ip-api.com/json/${n}?fields=region,regionName`).then(e=>{const t=JSON.parse(e.body);return t.regionName&&t.region?`${t.regionName} (${t.region})`:""})})}function X(n){return g(this,null,function*(){return yield C.http.get(`http://ip-api.com/json/${n}?fields=isp`).then(e=>JSON.parse(e.body).isp||"")})}function Q(n){return g(this,null,function*(){return yield C.http.post({url:"http://ip-api.com/batch?fields=isp",body:JSON.stringify(n)}).then(e=>JSON.parse(e.body).map(o=>o.isp))})}function Z(n,r){let e,t;const o=_(n);if((e=r.match(/^(.*?)\/(\d{1,2})$/))&&(t=_(e[1]))>=0){const a=P(2,32-parseInt(e[2]));return o>=t&&o<=t+a-1}return!1}function _(n){let r;if(r=n.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let e=0,t=1;for(let o=4;o>=1;o-=1)e+=t*parseInt(r[o]),t*=256;return e}return-1}const I=$substore;class L{constructor(r,e){this.key=r,this.expires=e;const t=I.read(r);t?this.resourceCache=JSON.parse(t):(this.resourceCache={},this._persist()),this._cleanup()}_cleanup(){let r=!1;const e=new Date().getTime();Object.keys(this.resourceCache).forEach(t=>{const o=this.resourceCache[t];(!o.time||e-o.time>this.expires)&&(delete this.resourceCache[t],I.delete(`#${t}`),r=!0)}),r&&this._persist()}revokeIds(r){let e=!1;for(const t of r)delete this.resourceCache[t],e=!0;e&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){I.write(JSON.stringify(this.resourceCache),this.key)}get(r){const e=this.resourceCache[r]&&this.resourceCache[r].time;return e&&new Date().getTime()-e<=this.expires?this.resourceCache[r].data:null}set(r,e){this.resourceCache[r]={time:new Date().getTime(),data:e},this._persist()}}const y=L;var V=Math.pow,h=(n,r,e)=>new Promise((t,o)=>{var a=i=>{try{f(e.next(i))}catch(l){o(l)}},d=i=>{try{f(e.throw(i))}catch(l){o(l)}},f=i=>i.done?t(i.value):Promise.resolve(i.value).then(a,d);f((e=e.apply(n,r)).next())});const R="#sub-store-cached-dns",M="#sub-store-cached-isp",D="#sub-store-cached-region",S=7*24*60*60*1e3,A=new y(R,S),N=new y(M,S),T=new y(D,S);function b(n,r){n.type==="vmess"&&n.network==="ws"&&(n["ws-opts"]=n["ws-opts"]||{},n["ws-opts"].headers=n["ws-opts"].headers||{},n["ws-opts"].headers.Host=r),n.sni=r,c(n["skip-cert-verify"])||(n["skip-cert-verify"]=!0)}function ee(n,r){return parseRegex(n.regex).test(r.name)}function te(n,r){return n.ports.some(e=>e===r.port)}function ne(n,r){return h(this,null,function*(){return(yield Promise.all(n.ips.map(t=>F(r.server,t)))).some(t=>t)})}function re(n,r){return h(this,null,function*(){return(yield Promise.all(n.isps.map(t=>G(r.server,t)))).some(t=>t)})}function oe(n,r){return h(this,null,function*(){return(yield Promise.all(n.regions.map(t=>$(r.server,t)))).some(t=>t)})}function ie(n,r,e){return h(this,null,function*(){return(yield Promise.all(n.map(o=>o(r,e)))).every(o=>o)})}function $(n,r){return h(this,null,function*(){const e=yield O(n);try{let t="";const o=T.get(e);o?t=o:(t=yield getRegionFromIp(e),t&&T.set(e,t));const a=parseNameAndCode(t);if(a){const{name:d,code:f}=a,i=REGION[r.toLowerCase()];if(isRealValue(i)&&(i.some(l=>RegExp(`${l}`,"i").test(f))||i.some(l=>RegExp(`${l}`,"i").test(d))))return!0}}catch(t){return!1}return!1})}function G(n,r){return h(this,null,function*(){const e=yield O(n);let t="";const o=N.get(e);return o?t=o:(t=yield getISPFromIp(e),t&&N.set(e,t)),!!ISP[r].some(d=>RegExp(`${d}`,"i").test(t))})}function F(n,r){return h(this,null,function*(){const e=yield O(n);if(!isValidIpAddress(e))return!1;if(r.indexOf("/")<0)return!!(e===r||areFirstThreePartsEqual(e,r)&&getLastPartOfIP(r)==="*");let t,o;const a=v(e);if((t=r.match(/^(.*?)\/(\d{1,2})$/))&&(o=v(t[1]))>=0){const d=V(2,32-parseInt(t[2]));return a>=o&&a<=o+d-1}return!1})}function O(n){return h(this,null,function*(){let r=n;if(isDomain(n)){const e=A.get(n);if(e)r=e;else{const t=yield getIpFromDomain(n);r=t,t&&A.set(n,t)}}return r})}function v(n){let r;if(r=n.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)){let e=0,t=1;for(let o=4;o>=1;o-=1)e+=t*parseInt(r[o]),t*=256;return e}return-1}function Y(n){const{sni:r}=$arguments;return n.map(e=>(b(e,r),e))}u().operator=Y})()})();})();
