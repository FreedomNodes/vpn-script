/*!
 substore-tools - version: 1.8.1
 Build fullhash:d8ac12e9b74aaccd4045, chunkhash:402208e9923c9954cfa9 (2024-05-18 02:28:28)

 Author: Kien Tran
*/
(()=>{(()=>{"use strict";var D={3183:(n,s,r)=>{var a;typeof window!="undefined"?a=window:typeof r.g!="undefined"?a=r.g:typeof self!="undefined"?a=self:a={},n.exports=a},8475:(n,s,r)=>{r.d(s,{A:()=>C});const a=$substore;class _{constructor(e,o){this.key=e,this.expires=o;const c=a.read(e);c?this.resourceCache=JSON.parse(c):(this.resourceCache={},this._persist()),this._cleanup()}_cleanup(){let e=!1;const o=new Date().getTime();Object.keys(this.resourceCache).forEach(c=>{const h=this.resourceCache[c];(!h.time||o-h.time>this.expires)&&(delete this.resourceCache[c],a.delete(`#${c}`),e=!0)}),e&&this._persist()}revokeIds(e){let o=!1;for(const c of e)delete this.resourceCache[c],o=!0;o&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){a.write(JSON.stringify(this.resourceCache),this.key)}get(e){const o=this.resourceCache[e]&&this.resourceCache[e].time;return o&&new Date().getTime()-o<=this.expires?this.resourceCache[e].data:null}set(e,o){this.resourceCache[e]={time:new Date().getTime(),data:o},this._persist()}}const C=_},5254:(n,s,r)=>{r.d(s,{rg:()=>c});var a=r(8475),_=r(9468);const C=new a.A(_.Mn,_.i5),v=new a.A(_.Dh,_.i5),e=new a.A(_.dT,_.i5),o=new a.A(_.v9,_.i5),c=new a.A(_.KD,_.i5)},9468:(n,s,r)=>{r.d(s,{Dh:()=>U,KD:()=>P,Mn:()=>h,ax:()=>C,dT:()=>S,i5:()=>R,v9:()=>A});const a="schemaVersion",_="settings",C="subs",v="collections",e="files",o="modules",c="artifacts",h="#sub-store-cached-dns",S="#sub-store-cached-isp",A="#sub-store-cached-region",U="#sub-store-cached-country",P="#sub-store-cached-sub-info",R=7*24*60*60*1e3},8344:(n,s,r)=>{r.d(s,{_U:()=>a});function a(e,o){return e.find(c=>c.name===o)}function _(e,o){return e.findIndex(c=>c.name===o)}function C(e,o){const c=_(e,o);e.splice(c,1)}function v(e,o,c){const h=_(e,o);e[h]=c}}},T={};function d(n){var s=T[n];if(s!==void 0)return s.exports;var r=T[n]={exports:{}};return D[n](r,r.exports,d),r.exports}d.n=n=>{var s=n&&n.__esModule?()=>n.default:()=>n;return d.d(s,{a:s}),s},d.d=(n,s)=>{for(var r in s)d.o(s,r)&&!d.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:s[r]})},d.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}(),d.o=(n,s)=>Object.prototype.hasOwnProperty.call(n,s);var Y={};(()=>{var n=d(3183),s=d.n(n),r=d(8344),a=d(5254),_=d(9468),C=Object.defineProperty,v=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(l,u,t)=>u in l?C(l,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[u]=t,h=(l,u)=>{for(var t in u||(u={}))e.call(u,t)&&c(l,t,u[t]);if(v)for(var t of v(u))o.call(u,t)&&c(l,t,u[t]);return l},S=(l,u,t)=>new Promise((m,w)=>{var b=i=>{try{f(t.next(i))}catch(p){w(p)}},E=i=>{try{f(t.throw(i))}catch(p){w(p)}},f=i=>i.done?m(i.value):Promise.resolve(i.value).then(b,E);f((t=t.apply(l,u)).next())});const A=$substore;function U(l,u){return S(this,null,function*(){var t;const{getFlowHeaders:m}=flowUtils,w=A.read(_.ax);let b=[];l.source&&l.source._collection&&(b=l.source._collection.subscriptions);for(const E of b){const f=(0,r._U)(w,E);let i;const p=a.rg.get(E);if(p&&(f.subUserinfo=p),f.source==="local"&&!["localFirst","remoteFirst"].includes(f.mergeSources))f.subUserinfo&&(i=f.subUserinfo);else{let O=(t=`${f.url}`.split(/[\r\n]+/).map(y=>y.trim()).filter(y=>y.length))==null?void 0:t[0],g={};const I=O.split("#");if(O=O.split("#")[0],I.length>1)try{g=JSON.parse(decodeURIComponent(I[1]))}catch(y){for(const K of I[1].split("&")){const x=K.split("=")[0],N=K.split("=")[1];g[x]=N==null||N===""?!0:decodeURIComponent(N)}}u=h(h({},g),u),u.noFlow||(f.subUserinfo?i=f.subUserinfo:i=yield m(O))}i&&(f.subUserinfo=i,a.rg.set(E,i))}return new Promise(E=>{E()})})}var P=(l,u,t)=>new Promise((m,w)=>{var b=i=>{try{f(t.next(i))}catch(p){w(p)}},E=i=>{try{f(t.throw(i))}catch(p){w(p)}},f=i=>i.done?m(i.value):Promise.resolve(i.value).then(b,E);f((t=t.apply(l,u)).next())});function R(){return P(this,arguments,function*(l=[],u,t){return U(t,$arguments||{}).then(()=>{}).catch(()=>{}),l})}s().operator=R})()})();})();
