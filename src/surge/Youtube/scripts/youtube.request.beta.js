/*!
 substore-tools - version: 1.2.2
 Build fullhash:233b68276705bfbb4b4a, chunkhash:4bd8373e5586a4c4698a (2024-05-11 14:49:11)

 Author: Kien Tran
*/
(()=>{(()=>{"use strict";var ct={},De=Object.defineProperty,Re=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,pe=(I,B,b)=>B in I?De(I,B,{enumerable:!0,configurable:!0,writable:!0,value:b}):I[B]=b,se=(I,B)=>{for(var b in B||(B={}))ce.call(B,b)&&pe(I,b,B[b]);if(Y)for(var b of Y(B))de.call(B,b)&&pe(I,b,B[b]);return I},me=(I,B)=>Re(I,Ve(B)),je=(I,B)=>{var b={};for(var S in I)ce.call(I,S)&&B.indexOf(S)<0&&(b[S]=I[S]);if(I!=null&&Y)for(var S of Y(I))B.indexOf(S)<0&&de.call(I,S)&&(b[S]=I[S]);return b},ge=(I,B,b)=>new Promise((S,q)=>{var ne=P=>{try{p(b.next(P))}catch(X){q(X)}},F=P=>{try{p(b.throw(P))}catch(X){q(X)}},p=P=>P.done?S(P.value):Promise.resolve(P.value).then(ne,F);p((b=b.apply(I,B)).next())});(()=>{(function(e){function t(){}function s(){}var r=String.fromCharCode,n={}.toString,i=n.call(e.SharedArrayBuffer),a=n(),o=e.Uint8Array,u=o||Array,f=o?ArrayBuffer:u,d=f.isView||function(T){return T&&"length"in T},c=n.call(f.prototype);f=s.prototype;var O=e.TextEncoder,h=new(o?Uint16Array:u)(32);t.prototype.decode=function(T){if(!d(T)){var A=n.call(T);if(A!==c&&A!==i&&A!==a)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");T=o?new u(T):T||[]}for(var k=A="",g=0,y=T.length|0,W=y-32|0,v,N,D=0,K=0,L,R=0,_=-1;g<y;){for(v=g<=W?32:y-g|0;R<v;g=g+1|0,R=R+1|0){switch(N=T[g]&255,N>>4){case 15:if(L=T[g=g+1|0]&255,L>>6!==2||247<N){g=g-1|0;break}D=(N&7)<<6|L&63,K=5,N=256;case 14:L=T[g=g+1|0]&255,D<<=6,D|=(N&15)<<6|L&63,K=L>>6===2?K+4|0:24,N=N+256&768;case 13:case 12:L=T[g=g+1|0]&255,D<<=6,D|=(N&31)<<6|L&63,K=K+7|0,g<y&&L>>6===2&&D>>K&&1114112>D?(N=D,D=D-65536|0,0<=D&&(_=(D>>10)+55296|0,N=(D&1023)+56320|0,31>R?(h[R]=_,R=R+1|0,_=-1):(L=_,_=N,N=L))):(N>>=8,g=g-N-1|0,N=65533),D=K=0,v=g<=W?32:y-g|0;default:h[R]=N;continue;case 11:case 10:case 9:case 8:}h[R]=65533}if(k+=r(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15],h[16],h[17],h[18],h[19],h[20],h[21],h[22],h[23],h[24],h[25],h[26],h[27],h[28],h[29],h[30],h[31]),32>R&&(k=k.slice(0,R-32|0)),g<y){if(h[0]=_,R=~_>>>31,_=-1,k.length<A.length)continue}else _!==-1&&(k+=r(_));A+=k,k=""}return A},f.encode=function(T){T=T===void 0?"":""+T;var A=T.length|0,k=new u((A<<1)+8|0),g,y=0,W=!o;for(g=0;g<A;g=g+1|0,y=y+1|0){var v=T.charCodeAt(g)|0;if(127>=v)k[y]=v;else{if(2047>=v)k[y]=192|v>>6;else{e:{if(55296<=v)if(56319>=v){var N=T.charCodeAt(g=g+1|0)|0;if(56320<=N&&57343>=N){if(v=(v<<10)+N-56613888|0,65535<v){k[y]=240|v>>18,k[y=y+1|0]=128|v>>12&63,k[y=y+1|0]=128|v>>6&63,k[y=y+1|0]=128|v&63;continue}break e}v=65533}else 57343>=v&&(v=65533);!W&&g<<1<y&&g<<1<(y-7|0)&&(W=!0,N=new u(3*A),N.set(k),k=N)}k[y]=224|v>>12,k[y=y+1|0]=128|v>>6&63}k[y=y+1|0]=128|v&63}}return o?k.subarray(0,y):k.slice(0,y)},O||(e.TextDecoder=t,e.TextEncoder=s)})(globalThis);function I(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function B(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),S=[];for(let e=0;e<b.length;e++)S[b[e].charCodeAt(0)]=e;S[45]=b.indexOf("+"),S[95]=b.indexOf("/");function q(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let s=new Uint8Array(t),r=0,n=0,i,a=0;for(let o=0;o<e.length;o++){if(i=S[e.charCodeAt(o)],i===void 0)switch(e[o]){case"=":n=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(n){case 0:a=i,n=1;break;case 1:s[r++]=a<<2|(i&48)>>4,a=i,n=2;break;case 2:s[r++]=(a&15)<<4|(i&60)>>2,a=i,n=3;break;case 3:s[r++]=(a&3)<<6|i,n=0;break}}if(n==1)throw Error("invalid base64 string.");return s.subarray(0,r)}function ne(e){let t="",s=0,r,n=0;for(let i=0;i<e.length;i++)switch(r=e[i],s){case 0:t+=b[r>>2],n=(r&3)<<4,s=1;break;case 1:t+=b[n|r>>4],n=(r&15)<<2,s=2;break;case 2:t+=b[n|r>>6],t+=b[r&63],s=0;break}return s&&(t+=b[n],t+="=",s==1&&(t+="=")),t}var F;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(s,r,n,i,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:n,wireType:i,data:a})},e.onWrite=(s,r,n)=>{for(let{no:i,wireType:a,data:o}of e.list(r))n.tag(i,a).raw(o)},e.list=(s,r)=>{if(t(s)){let n=s[e.symbol];return r?n.filter(i=>i.no==r):n}return[]},e.last=(s,r)=>e.list(s,r).slice(-1)[0];let t=s=>s&&Array.isArray(s[e.symbol])})(F||(F={}));var p;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(p||(p={}));function P(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(n&127)<<r,!(n&128))return this.assertBounds(),[e,t]}let s=this.buf[this.pos++];if(e|=(s&15)<<28,t=(s&112)>>4,!(s&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(n&127)<<r,!(n&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function X(e,t,s){for(let i=0;i<28;i=i+7){let a=e>>>i,o=!(!(a>>>7)&&t==0),u=(o?a|128:a)&255;if(s.push(u),!o)return}let r=e>>>28&15|(t&7)<<4,n=!!(t>>3);if(s.push((n?r|128:r)&255),!!n){for(let i=3;i<31;i=i+7){let a=t>>>i,o=!!(a>>>7),u=(o?a|128:a)&255;if(s.push(u),!o)return}s.push(t>>>31&1)}}var Q=65536*65536;function be(e){let t=e[0]=="-";t&&(e=e.slice(1));let s=1e6,r=0,n=0;function i(a,o){let u=Number(e.slice(a,o));n*=s,r=r*s+u,r>=Q&&(n=n+(r/Q|0),r=r%Q)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),[t,r,n]}function ie(e,t){if(t<=2097151)return""+(Q*t+(e>>>0));let s=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,i=s+r*6777216+n*6710656,a=r+n*8147497,o=n*2,u=1e7;i>=u&&(a+=Math.floor(i/u),i%=u),a>=u&&(o+=Math.floor(a/u),a%=u);function f(d,c){let O=d?String(d):"";return c?"0000000".slice(O.length)+O:O}return f(o,0)+f(a,o)+f(i,1)}function ye(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let s=0;s<9;s++)t.push(e&127|128),e=e>>7;t.push(1)}}function Le(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let s=5;e&128&&s<10;s++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function $e(){let e=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}var w=$e();function we(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}var ke=/^-?[0-9]+$/,H=65536*65536,Ne=class{constructor(e,t){this.lo=e|0,this.hi=t|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*H+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}},U=class extends Ne{static from(e){if(w)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=w.C(e);case"number":if(e===0)return this.ZERO;e=w.C(e);case"bigint":if(!e)return this.ZERO;if(e<w.UMIN)throw new Error("signed value for ulong");if(e>w.UMAX)throw new Error("ulong too large");return w.V.setBigUint64(0,e,!0),new U(w.V.getInt32(0,!0),w.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!ke.test(e))throw new Error("string is no integer");let[t,s,r]=be(e);if(t)throw new Error("signed value");return new U(s,r);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new U(e,e/H)}throw new Error("unknown value "+typeof e)}toString(){return w?this.toBigInt().toString():ie(this.lo,this.hi)}toBigInt(){return we(w),w.V.setInt32(0,this.lo,!0),w.V.setInt32(4,this.hi,!0),w.V.getBigUint64(0,!0)}};U.ZERO=new U(0,0);var E=class extends Ne{static from(e){if(w)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=w.C(e);case"number":if(e===0)return this.ZERO;e=w.C(e);case"bigint":if(!e)return this.ZERO;if(e<w.MIN)throw new Error("ulong too small");if(e>w.MAX)throw new Error("ulong too large");return w.V.setBigInt64(0,e,!0),new E(w.V.getInt32(0,!0),w.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!ke.test(e))throw new Error("string is no integer");let[t,s,r]=be(e),n=new E(s,r);return t?n.negate():n;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new E(e,e/H):new E(-e,-e/H).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&2147483648)!==0}negate(){let e=~this.hi,t=this.lo;return t?t=~t+1:e+=1,new E(t,e)}toString(){if(w)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+ie(e.lo,e.hi)}return ie(this.lo,this.hi)}toBigInt(){return we(w),w.V.setInt32(0,this.lo,!0),w.V.setInt32(4,this.hi,!0),w.V.getBigInt64(0,!0)}};E.ZERO=new E(0,0);var ve={readUnknownField:!0,readerFactory:e=>new Pe(e)};function _e(e){return e?Object.assign(Object.assign({},ve),e):ve}var Pe=class{constructor(e,t){this.varint64=P,this.uint32=Le,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,s=e&7;if(t<=0||s<0||s>5)throw new Error("illegal tag: field no "+t+" wire type "+s);return[t,s]}skip(e){let t=this.pos;switch(e){case p.Varint:for(;this.buf[this.pos++]&128;);break;case p.Bit64:this.pos+=4;case p.Bit32:this.pos+=4;break;case p.LengthDelimited:let s=this.uint32();this.pos+=s;break;case p.StartGroup:let r;for(;(r=this.tag()[1])!==p.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new E(...this.varint64())}uint64(){return new U(...this.varint64())}sint64(){let[e,t]=this.varint64(),s=-(e&1);return e=(e>>>1|(t&1)<<31)^s,t=t>>>1^s,new E(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new U(this.sfixed32(),this.sfixed32())}sfixed64(){return new E(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}};function m(e,t){if(!e)throw new Error(t)}var xe=34028234663852886e22,Xe=-34028234663852886e22,Ce=4294967295,Ke=2147483647,Ge=-2147483648;function G(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Ke||e<Ge)throw new Error("invalid int 32: "+e)}function z(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Ce||e<0)throw new Error("invalid uint 32: "+e)}function ae(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>xe||e<Xe))throw new Error("invalid float 32: "+e)}var Ie={writeUnknownFields:!0,writerFactory:()=>new Je};function Me(e){return e?Object.assign(Object.assign({},Ie),e):Ie}var Je=class{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),s=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],s),s+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(z(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return G(e),ye(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){ae(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){z(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){G(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return G(e),e=(e<<1^e>>31)>>>0,ye(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),s=new DataView(t.buffer),r=E.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),s=new DataView(t.buffer),r=U.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=E.from(e);return X(t.lo,t.hi,this.buf),this}sint64(e){let t=E.from(e),s=t.hi>>31,r=t.lo<<1^s,n=(t.hi<<1|t.lo>>>31)^s;return X(r,n,this.buf),this}uint64(e){let t=U.from(e);return X(t.lo,t.hi,this.buf),this}},Te={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Be={ignoreUnknownFields:!1};function Ze(e){return e?Object.assign(Object.assign({},Be),e):Be}function We(e){return e?Object.assign(Object.assign({},Te),e):Te}var M=Symbol.for("protobuf-ts/message-type");function Ee(e){let t=!1,s=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);n=="_"?t=!0:/\d/.test(n)?(s.push(n),t=!0):t?(s.push(n.toUpperCase()),t=!1):r==0?s.push(n.toLowerCase()):s.push(n)}return s.join("")}var l;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(l||(l={}));var $;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})($||($={}));var ee;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})(ee||(ee={}));function Ye(e){var t,s,r,n;return e.localName=(t=e.localName)!==null&&t!==void 0?t:Ee(e.name),e.jsonName=(s=e.jsonName)!==null&&s!==void 0?s:Ee(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:ee.NO,e.opt=(n=e.opt)!==null&&n!==void 0?n:e.repeat||e.oneof?!1:e.kind=="message",e}function qe(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}var Qe=class{constructor(e){var t;this.fields=(t=e.fields)!==null&&t!==void 0?t:[]}prepare(){if(this.data)return;let e=[],t=[],s=[];for(let r of this.fields)if(r.oneof)s.includes(r.oneof)||(s.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":(!r.opt||r.repeat)&&e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName);break}this.data={req:e,known:t,oneofs:Object.values(s)}}is(e,t,s=!1){if(t<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let r=Object.keys(e),n=this.data;if(r.length<n.req.length||n.req.some(i=>!r.includes(i))||!s&&r.some(i=>!n.known.includes(i)))return!1;if(t<1)return!0;for(let i of n.oneofs){let a=e[i];if(!qe(a))return!1;if(a.oneofKind===void 0)continue;let o=this.fields.find(u=>u.localName===a.oneofKind);if(!o||!this.field(a[a.oneofKind],o,s,t))return!1}for(let i of this.fields)if(i.oneof===void 0&&!this.field(e[i.localName],i,s,t))return!1;return!0}field(e,t,s,r){let n=t.repeat;switch(t.kind){case"scalar":return e===void 0?t.opt:n?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return e===void 0?t.opt:n?this.scalars(e,l.INT32,r):this.scalar(e,l.INT32);case"message":return e===void 0?!0:n?this.messages(e,t.T(),s,r):this.message(e,t.T(),s,r);case"map":if(typeof e!="object"||e===null)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),l.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),s,r)}break}return!0}message(e,t,s,r){return s?t.isAssignable(e,r):t.is(e,r)}messages(e,t,s,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(s){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!t.is(e[n],r-1))return!1;return!0}scalar(e,t,s){let r=typeof e;switch(t){case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:switch(s){case $.BIGINT:return r=="bigint";case $.NUMBER:return r=="number"&&!isNaN(e);default:return r=="string"}case l.BOOL:return r=="boolean";case l.STRING:return r=="string";case l.BYTES:return e instanceof Uint8Array;case l.DOUBLE:case l.FLOAT:return r=="number"&&!isNaN(e);default:return r=="number"&&Number.isInteger(e)}}scalars(e,t,s,r){if(!Array.isArray(e))return!1;if(s<2)return!0;if(Array.isArray(e)){for(let n=0;n<e.length&&n<s;n++)if(!this.scalar(e[n],t,r))return!1}return!0}mapKeys(e,t,s){let r=Object.keys(e);switch(t){case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:return this.scalars(r.slice(0,s).map(n=>parseInt(n)),t,s);case l.BOOL:return this.scalars(r.slice(0,s).map(n=>n=="true"?!0:n=="false"?!1:n),t,s);default:return this.scalars(r,t,s,$.STRING)}}};function V(e,t){switch(t){case $.BIGINT:return e.toBigInt();case $.NUMBER:return e.toNumber();default:return e.toString()}}var He=class{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};let t=(e=this.info.fields)!==null&&e!==void 0?e:[];for(let s of t)this.fMap[s.name]=s,this.fMap[s.jsonName]=s,this.fMap[s.localName]=s}}assert(e,t,s){if(!e){let r=I(s);throw(r=="number"||r=="boolean")&&(r=s.toString()),new Error(`Cannot parse JSON ${r} for ${this.info.typeName}#${t}`)}}read(e,t,s){this.prepare();let r=[];for(let[n,i]of Object.entries(e)){let a=this.fMap[n];if(!a){if(!s.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${n}`);continue}let o=a.localName,u;if(a.oneof){if(r.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(a.oneof),u=t[a.oneof]={oneofKind:o}}else u=t;if(a.kind=="map"){if(i===null)continue;this.assert(B(i),a.name,i);let f=u[o];for(let[d,c]of Object.entries(i)){this.assert(c!==null,a.name+" map value",null);let O;switch(a.V.kind){case"message":O=a.V.T().internalJsonRead(c,s);break;case"enum":if(O=this.enum(a.V.T(),c,a.name,s.ignoreUnknownFields),O===!1)continue;break;case"scalar":O=this.scalar(c,a.V.T,a.V.L,a.name);break}this.assert(O!==void 0,a.name+" map value",c);let h=d;a.K==l.BOOL&&(h=h=="true"?!0:h=="false"?!1:h),h=this.scalar(h,a.K,$.STRING,a.name).toString(),f[h]=O}}else if(a.repeat){if(i===null)continue;this.assert(Array.isArray(i),a.name,i);let f=u[o];for(let d of i){this.assert(d!==null,a.name,null);let c;switch(a.kind){case"message":c=a.T().internalJsonRead(d,s);break;case"enum":if(c=this.enum(a.T(),d,a.name,s.ignoreUnknownFields),c===!1)continue;break;case"scalar":c=this.scalar(d,a.T,a.L,a.name);break}this.assert(c!==void 0,a.name,i),f.push(c)}}else switch(a.kind){case"message":if(i===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}u[o]=a.T().internalJsonRead(i,s,u[o]);break;case"enum":let f=this.enum(a.T(),i,a.name,s.ignoreUnknownFields);if(f===!1)continue;u[o]=f;break;case"scalar":u[o]=this.scalar(i,a.T,a.L,a.name);break}}}enum(e,t,s,r){if(e[0]=="google.protobuf.NullValue"&&m(t===null,`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} only accepts null.`),t===null)return 0;switch(typeof t){case"number":return m(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${s}, enum can only be integral number, got ${t}.`),t;case"string":let n=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(n=t.substring(e[2].length));let i=e[1][n];return typeof i>"u"&&r?!1:(m(typeof i=="number",`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} has no value for "${t}".`),i)}m(!1,`Unable to parse field ${this.info.typeName}#${s}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,s,r){let n;try{switch(t){case l.DOUBLE:case l.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){n="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){n="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let i=Number(e);if(Number.isNaN(i)){n="not a number";break}if(!Number.isFinite(i)){n="too large or small";break}return t==l.FLOAT&&ae(i),i;case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?n="empty string":typeof e=="string"&&(e.trim().length!==e.length?n="extra whitespace":a=Number(e)),a===void 0)break;return t==l.UINT32?z(a):G(a),a;case l.INT64:case l.SFIXED64:case l.SINT64:if(e===null)return V(E.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return V(E.from(e),s);case l.FIXED64:case l.UINT64:if(e===null)return V(U.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return V(U.from(e),s);case l.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case l.STRING:if(e===null)return"";if(typeof e!="string"){n="extra whitespace";break}try{encodeURIComponent(e)}catch(o){o="invalid UTF8";break}return e;case l.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return q(e)}}catch(i){n=i.message}this.assert(!1,r+(n?" - "+n:""),e)}},ze=class{constructor(e){var t;this.fields=(t=e.fields)!==null&&t!==void 0?t:[]}write(e,t){let s={},r=e;for(let n of this.fields){if(!n.oneof){let u=this.field(n,r[n.localName],t);u!==void 0&&(s[t.useProtoFieldName?n.name:n.jsonName]=u);continue}let i=r[n.oneof];if(i.oneofKind!==n.localName)continue;let a=n.kind=="scalar"||n.kind=="enum"?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t,o=this.field(n,i[n.localName],a);m(o!==void 0),s[t.useProtoFieldName?n.name:n.jsonName]=o}return s}field(e,t,s){let r;if(e.kind=="map"){m(typeof t=="object"&&t!==null);let n={};switch(e.V.kind){case"scalar":for(let[o,u]of Object.entries(t)){let f=this.scalar(e.V.T,u,e.name,!1,!0);m(f!==void 0),n[o.toString()]=f}break;case"message":let i=e.V.T();for(let[o,u]of Object.entries(t)){let f=this.message(i,u,e.name,s);m(f!==void 0),n[o.toString()]=f}break;case"enum":let a=e.V.T();for(let[o,u]of Object.entries(t)){m(u===void 0||typeof u=="number");let f=this.enum(a,u,e.name,!1,!0,s.enumAsInteger);m(f!==void 0),n[o.toString()]=f}break}(s.emitDefaultValues||Object.keys(n).length>0)&&(r=n)}else if(e.repeat){m(Array.isArray(t));let n=[];switch(e.kind){case"scalar":for(let o=0;o<t.length;o++){let u=this.scalar(e.T,t[o],e.name,e.opt,!0);m(u!==void 0),n.push(u)}break;case"enum":let i=e.T();for(let o=0;o<t.length;o++){m(t[o]===void 0||typeof t[o]=="number");let u=this.enum(i,t[o],e.name,e.opt,!0,s.enumAsInteger);m(u!==void 0),n.push(u)}break;case"message":let a=e.T();for(let o=0;o<t.length;o++){let u=this.message(a,t[o],e.name,s);m(u!==void 0),n.push(u)}break}(s.emitDefaultValues||n.length>0||s.emitDefaultValues)&&(r=n)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,s.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,s.emitDefaultValues,s.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,s);break}return r}enum(e,t,s,r,n,i){if(e[0]=="google.protobuf.NullValue")return null;if(t===void 0){m(r);return}if(!(t===0&&!n&&!r))return m(typeof t=="number"),m(Number.isInteger(t)),i||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,s,r){return t===void 0?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,s,r,n){if(t===void 0){m(r);return}let i=n||r;switch(e){case l.INT32:case l.SFIXED32:case l.SINT32:return t===0?i?0:void 0:(G(t),t);case l.FIXED32:case l.UINT32:return t===0?i?0:void 0:(z(t),t);case l.FLOAT:ae(t);case l.DOUBLE:return t===0?i?0:void 0:(m(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case l.STRING:return t===""?i?"":void 0:(m(typeof t=="string"),t);case l.BOOL:return t===!1?i?!1:void 0:(m(typeof t=="boolean"),t);case l.UINT64:case l.FIXED64:m(typeof t=="number"||typeof t=="string"||typeof t=="bigint");let a=U.from(t);return a.isZero()&&!i?void 0:a.toString();case l.INT64:case l.SFIXED64:case l.SINT64:m(typeof t=="number"||typeof t=="string"||typeof t=="bigint");let o=E.from(t);return o.isZero()&&!i?void 0:o.toString();case l.BYTES:return m(t instanceof Uint8Array),t.byteLength?ne(t):i?"":void 0}}};function oe(e,t=$.STRING){switch(e){case l.BOOL:return!1;case l.UINT64:case l.FIXED64:return V(U.ZERO,t);case l.INT64:case l.SFIXED64:case l.SINT64:return V(E.ZERO,t);case l.DOUBLE:case l.FLOAT:return 0;case l.BYTES:return new Uint8Array(0);case l.STRING:return"";default:return 0}}var et=class{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let t=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(t.map(s=>[s.no,s]))}}read(e,t,s,r){this.prepare();let n=r===void 0?e.len:e.pos+r;for(;e.pos<n;){let[i,a]=e.tag(),o=this.fieldNoToField.get(i);if(!o){let c=s.readUnknownField;if(c=="throw")throw new Error(`Unknown field ${i} (wire type ${a}) for ${this.info.typeName}`);let O=e.skip(a);c!==!1&&(c===!0?F.onRead:c)(this.info.typeName,t,i,a,O);continue}let u=t,f=o.repeat,d=o.localName;switch(o.oneof&&(u=u[o.oneof],u.oneofKind!==d&&(u=t[o.oneof]={oneofKind:d})),o.kind){case"scalar":case"enum":let c=o.kind=="enum"?l.INT32:o.T,O=o.kind=="scalar"?o.L:void 0;if(f){let A=u[d];if(a==p.LengthDelimited&&c!=l.STRING&&c!=l.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)A.push(this.scalar(e,c,O))}else A.push(this.scalar(e,c,O))}else u[d]=this.scalar(e,c,O);break;case"message":if(f){let A=u[d],k=o.T().internalBinaryRead(e,e.uint32(),s);A.push(k)}else u[d]=o.T().internalBinaryRead(e,e.uint32(),s,u[d]);break;case"map":let[h,T]=this.mapEntry(o,e,s);u[d][h]=T;break}}}mapEntry(e,t,s){let r=t.uint32(),n=t.pos+r,i,a;for(;t.pos<n;){let[o,u]=t.tag();switch(o){case 1:e.K==l.BOOL?i=t.bool().toString():i=this.scalar(t,e.K,$.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(t,e.V.T,e.V.L);break;case"enum":a=t.int32();break;case"message":a=e.V.T().internalBinaryRead(t,t.uint32(),s);break}break;default:throw new Error(`Unknown field ${o} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(i===void 0){let o=oe(e.K);i=e.K==l.BOOL?o.toString():o}if(a===void 0)switch(e.V.kind){case"scalar":a=oe(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[i,a]}scalar(e,t,s){switch(t){case l.INT32:return e.int32();case l.STRING:return e.string();case l.BOOL:return e.bool();case l.DOUBLE:return e.double();case l.FLOAT:return e.float();case l.INT64:return V(e.int64(),s);case l.UINT64:return V(e.uint64(),s);case l.FIXED64:return V(e.fixed64(),s);case l.FIXED32:return e.fixed32();case l.BYTES:return e.bytes();case l.UINT32:return e.uint32();case l.SFIXED32:return e.sfixed32();case l.SFIXED64:return V(e.sfixed64(),s);case l.SINT32:return e.sint32();case l.SINT64:return V(e.sint64(),s)}}},tt=class{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((t,s)=>t.no-s.no)}}write(e,t,s){this.prepare();for(let n of this.fields){let i,a,o=n.repeat,u=n.localName;if(n.oneof){let f=e[n.oneof];if(f.oneofKind!==u)continue;i=f[u],a=!0}else i=e[u],a=!1;switch(n.kind){case"scalar":case"enum":let f=n.kind=="enum"?l.INT32:n.T;if(o)if(m(Array.isArray(i)),o==ee.PACKED)this.packed(t,f,n.no,i);else for(let d of i)this.scalar(t,f,n.no,d,!0);else i===void 0?m(n.opt):this.scalar(t,f,n.no,i,a||n.opt);break;case"message":if(o){m(Array.isArray(i));for(let d of i)this.message(t,s,n.T(),n.no,d)}else this.message(t,s,n.T(),n.no,i);break;case"map":m(typeof i=="object"&&i!==null);for(let[d,c]of Object.entries(i))this.mapEntry(t,s,n,d,c);break}}let r=s.writeUnknownFields;r!==!1&&(r===!0?F.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,s,r,n){e.tag(s.no,p.LengthDelimited),e.fork();let i=r;switch(s.K){case l.INT32:case l.FIXED32:case l.UINT32:case l.SFIXED32:case l.SINT32:i=Number.parseInt(r);break;case l.BOOL:m(r=="true"||r=="false"),i=r=="true";break}switch(this.scalar(e,s.K,1,i,!0),s.V.kind){case"scalar":this.scalar(e,s.V.T,2,n,!0);break;case"enum":this.scalar(e,l.INT32,2,n,!0);break;case"message":this.message(e,t,s.V.T(),2,n);break}e.join()}message(e,t,s,r,n){n!==void 0&&(s.internalBinaryWrite(n,e.tag(r,p.LengthDelimited).fork(),t),e.join())}scalar(e,t,s,r,n){let[i,a,o]=this.scalarInfo(t,r);(!o||n)&&(e.tag(s,i),e[a](r))}packed(e,t,s,r){if(!r.length)return;m(t!==l.BYTES&&t!==l.STRING),e.tag(s,p.LengthDelimited),e.fork();let[,n]=this.scalarInfo(t);for(let i=0;i<r.length;i++)e[n](r[i]);e.join()}scalarInfo(e,t){let s=p.Varint,r,n=t===void 0,i=t===0;switch(e){case l.INT32:r="int32";break;case l.STRING:i=n||!t.length,s=p.LengthDelimited,r="string";break;case l.BOOL:i=t===!1,r="bool";break;case l.UINT32:r="uint32";break;case l.DOUBLE:s=p.Bit64,r="double";break;case l.FLOAT:s=p.Bit32,r="float";break;case l.INT64:i=n||E.from(t).isZero(),r="int64";break;case l.UINT64:i=n||U.from(t).isZero(),r="uint64";break;case l.FIXED64:i=n||U.from(t).isZero(),s=p.Bit64,r="fixed64";break;case l.BYTES:i=n||!t.byteLength,s=p.LengthDelimited,r="bytes";break;case l.FIXED32:s=p.Bit32,r="fixed32";break;case l.SFIXED32:s=p.Bit32,r="sfixed32";break;case l.SFIXED64:i=n||E.from(t).isZero(),s=p.Bit64,r="sfixed64";break;case l.SINT32:r="sint32";break;case l.SINT64:i=n||E.from(t).isZero(),r="sint64";break}return[s,r,n||i]}};function rt(e){let t={};Object.defineProperty(t,M,{enumerable:!1,value:e});for(let s of e.fields){let r=s.localName;if(!s.opt)if(s.oneof)t[s.oneof]={oneofKind:void 0};else if(s.repeat)t[r]=[];else switch(s.kind){case"scalar":t[r]=oe(s.T,s.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function C(e,t,s){let r,n=s,i;for(let a of e.fields){let o=a.localName;if(a.oneof){let u=n[a.oneof];if((u==null?void 0:u.oneofKind)==null)continue;if(r=u[o],i=t[a.oneof],i.oneofKind=u.oneofKind,r==null){delete i[o];continue}}else if(r=n[o],i=t,r==null)continue;switch(a.repeat&&(i[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let f=0;f<r.length;f++)i[o][f]=r[f];else i[o]=r;break;case"message":let u=a.T();if(a.repeat)for(let f=0;f<r.length;f++)i[o][f]=u.create(r[f]);else i[o]===void 0?i[o]=u.create(r):u.mergePartial(i[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(i[o],r);break;case"message":let f=a.V.T();for(let d of Object.keys(r))i[o][d]=f.create(r[d]);break}break}}}function st(e,t,s){if(t===s)return!0;if(!t||!s)return!1;for(let r of e.fields){let n=r.localName,i=r.oneof?t[r.oneof][n]:t[n],a=r.oneof?s[r.oneof][n]:s[n];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?l.INT32:r.T;if(!(r.repeat?Se(o,i,a):Oe(o,i,a)))return!1;break;case"map":if(!(r.V.kind=="message"?Fe(r.V.T(),te(i),te(a)):Se(r.V.kind=="enum"?l.INT32:r.V.T,te(i),te(a))))return!1;break;case"message":let u=r.T();if(!(r.repeat?Fe(u,i,a):u.equals(i,a)))return!1;break}}return!0}var te=Object.values;function Oe(e,t,s){if(t===s)return!0;if(e!==l.BYTES)return!1;let r=t,n=s;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!=n[i])return!1;return!0}function Se(e,t,s){if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(!Oe(e,t[r],s[r]))return!1;return!0}function Fe(e,t,s){if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],s[r]))return!1;return!0}var re=class{constructor(e,t,s){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(Ye),this.options=s!=null?s:{},this.refTypeCheck=new Qe(this),this.refJsonReader=new He(this),this.refJsonWriter=new ze(this),this.refBinReader=new et(this),this.refBinWriter=new tt(this)}create(e){let t=rt(this);return e!==void 0&&C(this,t,e),t}clone(e){let t=this.create();return C(this,t,e),t}equals(e,t){return st(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){C(this,e,t)}fromBinary(e,t){let s=_e(t);return this.internalBinaryRead(s.readerFactory(e),e.byteLength,s)}fromJson(e,t){return this.internalJsonRead(e,Ze(t))}fromJsonString(e,t){let s=JSON.parse(e);return this.fromJson(s,t)}toJson(e,t){return this.internalJsonWrite(e,We(t))}toJsonString(e,t){var s;let r=this.toJson(e,t);return JSON.stringify(r,null,(s=t==null?void 0:t.prettySpaces)!==null&&s!==void 0?s:0)}toBinary(e,t){let s=Me(t);return this.internalBinaryWrite(e,s.writerFactory(),s).finish()}internalJsonRead(e,t,s){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let r=s!=null?s:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${I(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,s){return this.refBinWriter.write(e,t,s),t}internalBinaryRead(e,t,s,r){let n=r!=null?r:this.create();return this.refBinReader.read(e,n,s,t),n}},nt=class extends re{constructor(){super("Request",[{no:1,name:"context",kind:"message",T:()=>le},{no:2,name:"browseId",kind:"scalar",T:9}])}create(e){let t={browseId:""};return globalThis.Object.defineProperty(t,M,{enumerable:!1,value:this}),e!==void 0&&C(this,t,e),t}internalBinaryRead(e,t,s,r){let n=r!=null?r:this.create(),i=e.pos+t;for(;e.pos<i;){let[a,o]=e.tag();switch(a){case 1:n.context=le.internalBinaryRead(e,e.uint32(),s,n.context);break;case 2:n.browseId=e.string();break;default:let u=s.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${o}) for ${this.typeName}`);let f=e.skip(o);u!==!1&&(u===!0?F.onRead:u)(this.typeName,n,a,o,f)}}return n}internalBinaryWrite(e,t,s){e.context&&le.internalBinaryWrite(e.context,t.tag(1,p.LengthDelimited).fork(),s).join(),e.browseId!==""&&t.tag(2,p.LengthDelimited).string(e.browseId);let r=s.writeUnknownFields;return r!==!1&&(r==!0?F.onWrite:r)(this.typeName,e,t),t}},it=new nt,at=class extends re{constructor(){super("Context",[{no:9,name:"adSignalsInfo",kind:"message",T:()=>ue}])}create(e){let t={};return globalThis.Object.defineProperty(t,M,{enumerable:!1,value:this}),e!==void 0&&C(this,t,e),t}internalBinaryRead(e,t,s,r){let n=r!=null?r:this.create(),i=e.pos+t;for(;e.pos<i;){let[a,o]=e.tag();switch(a){case 9:n.adSignalsInfo=ue.internalBinaryRead(e,e.uint32(),s,n.adSignalsInfo);break;default:let u=s.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${o}) for ${this.typeName}`);let f=e.skip(o);u!==!1&&(u===!0?F.onRead:u)(this.typeName,n,a,o,f)}}return n}internalBinaryWrite(e,t,s){e.adSignalsInfo&&ue.internalBinaryWrite(e.adSignalsInfo,t.tag(9,p.LengthDelimited).fork(),s).join();let r=s.writeUnknownFields;return r!==!1&&(r==!0?F.onWrite:r)(this.typeName,e,t),t}},le=new at,ot=class extends re{constructor(){super("AdSignalsInfo",[{no:1,name:"params",kind:"message",repeat:1,T:()=>fe}])}create(e){let t={params:[]};return globalThis.Object.defineProperty(t,M,{enumerable:!1,value:this}),e!==void 0&&C(this,t,e),t}internalBinaryRead(e,t,s,r){let n=r!=null?r:this.create(),i=e.pos+t;for(;e.pos<i;){let[a,o]=e.tag();switch(a){case 1:n.params.push(fe.internalBinaryRead(e,e.uint32(),s));break;default:let u=s.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${o}) for ${this.typeName}`);let f=e.skip(o);u!==!1&&(u===!0?F.onRead:u)(this.typeName,n,a,o,f)}}return n}internalBinaryWrite(e,t,s){for(let n=0;n<e.params.length;n++)fe.internalBinaryWrite(e.params[n],t.tag(1,p.LengthDelimited).fork(),s).join();let r=s.writeUnknownFields;return r!==!1&&(r==!0?F.onWrite:r)(this.typeName,e,t),t}},ue=new ot,lt=class extends re{constructor(){super("Params",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}create(e){let t={key:"",value:""};return globalThis.Object.defineProperty(t,M,{enumerable:!1,value:this}),e!==void 0&&C(this,t,e),t}internalBinaryRead(e,t,s,r){let n=r!=null?r:this.create(),i=e.pos+t;for(;e.pos<i;){let[a,o]=e.tag();switch(a){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:let u=s.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${o}) for ${this.typeName}`);let f=e.skip(o);u!==!1&&(u===!0?F.onRead:u)(this.typeName,n,a,o,f)}}return n}internalBinaryWrite(e,t,s){e.key!==""&&t.tag(1,p.LengthDelimited).string(e.key),e.value!==""&&t.tag(2,p.LengthDelimited).string(e.value);let r=s.writeUnknownFields;return r!==!1&&(r==!0?F.onWrite:r)(this.typeName,e,t),t}},fe=new lt,J=class{constructor(e,t,s){var r;this._times=new Map,this.name=e!=null?e:"",this.debug=(r=s==null?void 0:s.debug)!=null?r:!1,e&&this.log(`${e} Start`),this.className=t!=null?t:"",this.init()}static getInstance(e,t){let s=typeof $task<"u"?"QuanX":"Surge";return J.instances[s]||(J.instances[s]=J.classNames[s](e,s,t)),J.instances[s]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,t,s){return e[t]}setFn(e,t,s,r){return e[t]=s,!0}getJSON(e,t={}){let s=this.getVal(e);return s?JSON.parse(s):t}setJSON(e,t){this.setVal(JSON.stringify(e),t)}msg(e=this.name,t="",s="",r){}log(e){this.debug&&(typeof e=="object"&&(e=JSON.stringify(e)),console.log(e))}timeStart(e){this._times=this._times||{},this._times[e]=Date.now()}timeEnd(e){var t;if((t=this._times)!=null&&t.has(e)){let s=Date.now()-this._times[e];this.log(`${e}: ${s}ms`),this._times.delete(e)}else this.log(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}},Z=J;Z.instances={},Z.classNames={QuanX:(e,t,s)=>new Ue(e,t,s),Surge:(e,t,s)=>new Ae(e,t,s)};var he=class extends Z{getFn(e,t,s){let r=he.clientAdapter[t]||t;return super.getFn(e,r,s)}setFn(e,t,s,r){let n=he.clientAdapter[t]||t;return super.setFn(e,n,s,r)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.log(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,t){$persistentStore.write(e,t)}msg(e=this.name,t="",s="",r){$notification.post(e,t,s,{url:r!=null?r:""})}fetch(e){return ge(this,null,function*(){return yield new Promise((t,s)=>{let r=e,{method:n,body:i,bodyBytes:a}=r,o=je(r,["method","body","bodyBytes"]),u=a!=null?a:i,f=u instanceof Uint8Array;$httpClient[n.toLowerCase()](me(se({},o),{body:u,"binary-mode":f}),(d,c,O)=>{d&&s(d);let h=f?"bodyBytes":"body";t({status:c.status||c.statusCode,headers:c.headers,[h]:O})})})})}done(e){var t;let s=(t=e.response)!=null?t:e,r,n;s.bodyBytes?(r=s.bodyBytes,delete s.bodyBytes,n=se({},e),n.response?n.response.body=r:n.body=r):n=e,$done(n)}},Ae=he;Ae.clientAdapter={bodyBytes:"body"};var x=class extends Z{static transferBodyBytes(e,t){return e instanceof ArrayBuffer?t==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&t==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.log(e.toString())}}getFn(e,t,s){let r=x.clientAdapter[t]||t,n=super.getFn(e,r,s);return t==="bodyBytes"&&(n=x.transferBodyBytes(n,"Uint8Array")),n}setFn(e,t,s,r){let n=x.clientAdapter[t]||t,i=s;return t==="bodyBytes"&&(i=x.transferBodyBytes(i,"Uint8Array")),super.setFn(e,n,i,r)}getVal(e){var t;return(t=$prefs.valueForKey(e))==null?void 0:t.replace(/\0/g,"")}setVal(e,t){$prefs.setValueForKey(e,t)}msg(e=this.name,t="",s="",r){$notify(e,t,s,{"open-url":r!=null?r:""})}fetch(e){return ge(this,null,function*(){return yield new Promise(t=>{let s={url:"",method:"GET"};for(let[r,n]of Object.entries(e))r==="id"?s.sessionIndex=n:r==="bodyBytes"?s.bodyBytes=x.transferBodyBytes(n,"ArrayBuffer"):s[r]=n;e.bodyBytes&&delete s.body,$task.fetch(s).then(r=>{let n={status:200,headers:{}};for(let[i,a]of Object.entries(r))i==="sessionIndex"?n.id=a:i==="bodyBytes"?n.bodyBytes=x.transferBodyBytes(a,"Uint8Array"):i==="statusCode"?n.status=a:n[i]=a;t(n)})})})}done(e){var t;let s=(t=e.response)!=null?t:e,r={};for(let[n,i]of Object.entries(s))n==="status"?r.status=`HTTP/1.1 ${i}`:n==="bodyBytes"?r.bodyBytes=x.transferBodyBytes(i,"ArrayBuffer"):r[n]=i;$done(r)}},Ue=x;Ue.clientAdapter={id:"sessionIndex",status:"statusCode"};var j=Z.getInstance("YouTube",{debug:!1}),ut=class{constructor(e,t){this.decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),j.log(t),this.msgType=e,Object.assign(this,j.getJSON("YouTubeAdvertiseInfo",{whiteNo:[],blackNo:[],whiteEml:[],blackEml:["cell_divider.eml"]}))}fromBinary(e){return this.message=this.msgType.fromBinary(e),this}toBinary(){return this.msgType.toBinary(this.message)}save(){if(this.needSave){j.log("Update Config");let e={whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};j.setJSON(e,"YouTubeAdvertiseInfo")}}done(e){var t,s;this.save();let r=e.bodyBytes;this.needProcess&&(r=this.toBinary()),e.headers["Content-Encoding"]="identity",e.headers["Content-Length"]=(s=(t=r==null?void 0:r.length)!=null?t:0)==null?void 0:s.toString(),j.done({response:me(se({},e),{bodyBytes:r})})}doneResponse(){this.save(),this.needProcess&&j.done({bodyBytes:this.toBinary()}),j.exit()}iterate(e={},t,s,r){let n=[];for(n.push(e);n.length;){let i=n.pop(),a=Object.keys(i);for(;a.length;){let o=a.pop();o===t?s(i,n):typeof i[o]=="object"&&(n.push(i[o]),typeof r=="function"&&r(i,n))}}}isAdvertise(e){let t=F.list(e)[0],s=t?this.handleFieldNo(t):this.handleFieldEml(e);return s&&(this.needProcess=!0),s}handleFieldNo(e){let t=e.no;if(this.whiteNo.includes(t))return!1;if(this.blackNo.includes(t))return!0;let s=this.decoder.decode(e.data).includes("pagead");return s?this.blackNo.push(t):this.whiteNo.push(t),this.needSave=!0,s}handleFieldEml(e){let t=!1,s=!0,r="";return this.iterate(e,"type",(n,i)=>{r=n.type.split("|")[0],this.whiteEml.includes(r)?t=!1:this.blackEml.includes(r)||/shorts(?!_pivot_item)/.test(r)?t=!0:s=!1,s&&(i.length=0)}),s||(this.iterate(e,"type",()=>{},(n,i)=>{let a=F.list(n);for(let o of a)if(o.data.length>1e3&&(t=this.decoder.decode(o.data).includes("pagead"),t)){i.length=0;break}}),t?this.blackEml.push(r):this.whiteEml.push(r),this.needSave=!0),t}},ft=class extends ut{constructor(e=it,t="Request"){super(e,t)}pure(){return this.message.context.adSignalsInfo.params.length=0,this.needProcess=!0,this}},ht=new ft;try{let e=ht.fromBinary(j.request.bodyBytes).pure().toBinary();j.done({bodyBytes:e})}catch(e){j.log(e.toString()),j.exit()}})()})();})();
